{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Edit Blog - Kingfood</title>
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
  
  <script src="https://cdn.tiny.cloud/1/rbq7zvmu93mleux2vh63i3huoolyjb4c145533xy3fjjmt19/tinymce/8/tinymce.min.js" referrerpolicy="origin" crossorigin="anonymous"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      tinymce.init({
        selector:'#content',
        height: 360,
        menubar: true,
        plugins: 'lists link image table code advlist autolink charmap print preview anchor textcolor',
        toolbar: 'undo redo | formatselect | fontselect fontsizeselect | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | code',
        content_style: 'body { font-family:Athiti, sans-serif; font-size:16px }'
      });
      const form = document.getElementById('blog-form');
      form.addEventListener('submit', async function(e){
        const title = document.getElementById('title').value.trim();
        const content = tinymce.get('content').getContent({ format:'html' }).trim();
        if(!title || !content){ e.preventDefault(); alert('Title and content are required.'); }
      });
    });
  </script>
</head>
<body>
{% include 'freshbread/header.html' %}
<div class="container mt-4">
  <h2>Edit Blog</h2>
  {% if messages %}
    {% for m in messages %}<div class="alert alert-{{ m.tags }}">{{ m }}</div>{% endfor %}
  {% endif %}
  <form id="blog-form" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
      <label>Title</label>
      <input id="title" name="title" class="form-control" value="{{ post.title }}" required>
    </div>
    <div class="form-group">
      <label>Content</label>
      <textarea id="content" name="content">{{ post.content|safe }}</textarea>
    </div>
    <div class="form-group">
      <label>SEO Keywords</label>
      <input name="seo_keywords" class="form-control" value="{{ post.seo_keywords }}">
    </div>
    <div class="form-group">
      <label>Tags</label>
      <input name="tags" class="form-control" value="{{ post.tags }}">
    </div>
    <div class="form-group">
      <label>Blog list image (max 570x470)</label>
      <input id="cover_list" name="cover_list" type="file" accept="image/*" class="form-control">
    </div>
    <div class="form-group">
      <label>Blog single image</label>
      <input id="cover_single" name="cover_single" type="file" accept="image/*" class="form-control">
    </div>
    <button class="btn btn-primary">Save</button>
  </form>
</div>
	<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
	<script src="{% static 'js/popper.min.js' %}"></script>
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- ALL PLUGINS -->
	<script src="{% static 'js/jquery.superslides.min.js' %}"></script>
	<script src="{% static 'js/images-loded.min.js' %}"></script>
	<script src="{% static 'js/isotope.min.js' %}"></script>
	<script src="{% static 'js/baguetteBox.min.js' %}"></script>
	<script src="{% static 'js/form-validator.min.js' %}"></script>
    <script src="{% static 'js/contact-form-script.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
{% include 'freshbread/footer.html' %}
</body>
</html>